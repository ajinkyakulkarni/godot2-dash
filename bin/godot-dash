#!/usr/bin/env node

var dash = require('../lib/index'),
    godot = require('godot');

var godotPort = 1337,
    httpPort = 1338;

//
// dashboard is an object with two properties:
// 
// * dashboard.server: http server w/ static assets and engine.io hooks
// * dashboard.reactor: a godot reactor
//
var dashboard = dash.createServer();

godot.createServer({
  type: 'tcp',
  reactors: [
    dashboard.reactor(godot)
  ]
}).listen(godotPort);

dashboard.server.listen(httpPort, function (err) {
  if (err) {
    throw err;
  }

  console.log('godot-dash is online');
  console.log('godot server listening on tcp://0.0.0.0:' + godotPort);
  console.log('http server listening on http://0.0.0.0:' + httpPort);
  console.log('CTRL-C to stop');
});
